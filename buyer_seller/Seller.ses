package buyer_seller;

class Seller typestate SellerProtocol {
	private final Socket socketBuyer1;
	private final Socket socketBuyer2;

	public Seller(Socket socketBuyer1, Socket socketBuyer2) {
		this.socketBuyer1 = socketBuyer1;
		this.socketBuyer2 = socketBuyer2;
	}

	String receiveTitleFromBuyer1() {
		return this.socketBuyer1.receive(this);
	}

	void sendPriceToBuyer1(String price) {
		this.socketBuyer1.send(this, price);
	}

	AgreementLabel receiveLabelFromBuyer2() {
		String label = this.socketBuyer2.receive(this);
		if (label.equals("AGREE")) {
			// If it is agree, TalkToSeller ...

			return new AgreementLabel(AgreementLabel.AGREE);
		}

		return new AgreementLabel(AgreementLabel.QUIT);	
	}

	String receiveMoneyFromBothBuyers() {
		String fromBuyer1 = this.socketBuyer1.receive(this);
		String fromBuyer2 = this.socketBuyer2.receive(this);

		return "42"; //fix proper substraction
	}
}