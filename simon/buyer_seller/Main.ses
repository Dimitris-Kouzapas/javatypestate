package buyer_seller;

import java.io.*;

public class Main {
	
	public static void main(String[] args) {
		Socket socketSellerBuyer1 = new Socket();
		Socket socketSellerBuyer2 = new Socket();
		Socket socketBuyer1Buyer2 = new Socket();

		Seller seller = new Seller(socketSellerBuyer1, socketSellerBuyer2);
		Buyer1 buyer1 = new Buyer1(socketSellerBuyer1, socketBuyer1Buyer2);
		Buyer2 buyer2 = new Buyer2(socketSellerBuyer2, socketBuyer1Buyer2);

		socketSellerBuyer1.setEndpoints(seller, buyer1);
		socketSellerBuyer2.setEndpoints(seller, buyer2);
		socketBuyer1Buyer2.setEndpoints(buyer1, buyer2);
		
		S theSeller = new S(socketSellerBuyer1, socketSellerBuyer2);
		B1 theBuyer1 = new B1(socketSellerBuyer1, socketBuyer1Buyer2);
		B2 theBuyer2 = new B2(socketSellerBuyer2, socketBuyer1Buyer2);

		Thread threadS = new Thread(theSeller);
		Thread threadB1 = new Thread(theBuyer1);
		Thread threadB2 = new Thread(theBuyer2);
		
		System.out.println("Begin Protocol");
		
		threadS.start();
		threadB1.start();
		threadB2.start();
		
		System.out.println("End Protocol");
	}
}
