package buyer_seller;

class B2 typestate B2Protocol implements Runnable {

	Socket socketSellerBuyer2;
	Socket socketBuyer1Buyer2;
	
	Buyer2 buyer2;
	
	public B2(Socket sb2, Socket b1b2) {
		socketSellerBuyer2 = sb2;
		socketBuyer1Buyer2 = b1b2;
		buyer2 = new Buyer2(socketSellerBuyer2,socketBuyer1Buyer2);
	}
	
	public void run() {
		String quote = buyer2.receiveQuoteFromBuyer1();
		switch (buyer2.sendToSellerBuyer1("AGREE").getEnum()) {
			case AgreementLabel.AGREE:
				buyer2.transferMoneyToSeller("£42");
				break;
			case AgreementLabel.QUIT:
				break;
		}
	}
}