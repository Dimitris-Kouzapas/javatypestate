package buyer_seller;

class S typestate SProtocol implements Runnable {

	Socket socketSellerBuyer1;
	Socket socketSellerBuyer2;
	
	Seller seller;
	
	public S(Socket sb1, Socket sb2) {
		socketSellerBuyer1 = sb1;
		socketSellerBuyer2 = sb2;
		seller = new Seller(socketSellerBuyer1,socketSellerBuyer2);
	}
	
	public void run() {
		String title = seller.receiveTitleFromBuyer1();
		seller.sendPriceToBuyer1("£80");
		switch (seller.receiveLabelFromBuyer2().getEnum()) {
			case AgreementLabel.AGREE:
				String money;
				money = seller.receiveMoneyFromBothBuyers();
				System.out.println("Seller: I received a total amount of " + money);
				break;
			case AgreementLabel.QUIT:
				System.out.println("Seller: We end the communication!");
				break;
		}
	}
}