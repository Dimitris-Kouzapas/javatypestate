package demos.jedis;

typestate Redis_Client_Async {
	session
		Init = {
           void sendWATCH(String[]): Watching
		}
	where
		Watching = {
			void sendGET_request(String): Watching_GET,
			void sendWATCH(String[]): Watching,
			void sendMULTI(): Queued
		}
		
		Watching_GET = {
			String receiveGET_response(): Watching 
		}
		
		Queued = {
		    void sendSET(String[]): Queued,
			void sendDISCARD(): end,
			void sendEXEC_request(): Queued_EXEC
		}
		
		Queued_EXEC = {
			Result receiveEXEC_response(): <OK: end, FAIL: Queued>
		}
}
