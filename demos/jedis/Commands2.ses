package demos.jedis_wrapper;

// This is roughly what we would end up with our current Scribble-to-typestate translation.
typestate Commands2 {
	session
		InitSession = {
           void sendWATCH(String[]): Watching
		}
	where
	    // Use commas rather than semicolons to separate members
		Watching = {
			void sendGET(String): Watching0,
			void sendLRANGE(): Watching1,
			void sendWATCH(String[]): Watching,
			void sendMULTI(): Queued
		}

	 	Watching0 = {
			String receiveGET(): Watching
	 	}
		
		Watching1 = {
			List receiveLRANGE(): Watching
		}

		Queued = {
		    void sendSET(String, String): Queued,
		    void sendLPOP (String): Queued0,
			void sendDISCARD(): end,
			void sendEXEC(): Queued1
		}
		
		Queued0 = {
		    String receiveLPOP (): Queued
		}
		
		Queued1 = {
			Result receiveEXEC(): <OK:end, FAIL:Queued>
		}
}
