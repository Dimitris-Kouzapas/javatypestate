// We can't dispatch to a state based the value passed as an argument. Again this reflects the fact that the 
// resulting state is part of the _implementation_ of a method, not its signature.

package demos.redis.async;

typestate RedisClient {
	session
		Init = {
			Init_Exit init (): <
				GET: Awaiting_GET, 
				EXEC: Awaiting_EXEC, 
				OTHERWISE: end
			>
		}
	where
		Awaiting_GET = {
			GET_responseExit GET_response(String): <
				GET: Awaiting_GET, 
				EXEC: Awaiting_EXEC, 
				OTHERWISE: end
			>
		}

		Awaiting_EXEC = {
			void EXEC_response_OK(): end,
			EXEC_responseExit EXEC_response_FAIL(): <
				EXEC: Awaiting_EXEC, 
				OTHERWISE: end
			>
		}
}
