package demos.redis.alternative;

class RedisClientRole typestate RedisClientProtocol {
    void sendWATCH(String[] ks) {
	}
	
	WatchingLabel sendLabel_Watching(WatchingLabel l) {
		return null;
	}
	
	void sendArg_GET(String k) {
	}
	
	String receiveGET_response() {
		return null;
	}
	
	void sendArg_WATCH(String[] ks) {
	}
	
	QueuedLabel sendLabel_Queued(QueuedLabel l) {
		return null;
	}
	
	void sendArg0_SET(String k) {
	}
	
	void sendArg1_SET(String v) {
	}

	ResultLabel receiveEXEC_response() {
		return null;
	}

	public static void main (String[] args) {
		RedisClientRole redis = new RedisClientRole();
		redis.sendWATCH(null); // TODO
		WATCHING: while (true)
			switch (redis.sendLabel_Watching(null).getEnum()) { // TODO
				case WatchingLabel.GET_request:
					redis.sendArg_GET(null); // TODO
					String v = redis.receiveGET_response();
					continue WATCHING;
				case WatchingLabel.WATCH:
					redis.sendArg_WATCH(null); // TODO
					continue WATCHING;
				case WatchingLabel.MULTI:
					QUEUED: while (true)
						switch (redis.sendLabel_Queued(null).getEnum()) {
							case QueuedLabel.SET:
								redis.sendArg0_SET(null);
								redis.sendArg1_SET(null);
								continue QUEUED;
							case QueuedLabel.DISCARD:
								break WATCHING;
							case QueuedLabel.EXEC:
								switch (redis.receiveEXEC_response().getEnum()) {
									case ResultLabel.OK:
										break WATCHING;
									case ResultLabel.FAIL:
										continue QUEUED;
								}
						}
			}
	}
}
