package demos.redis.jediswrapper;

public class Test1 {
	public static void main (String[] args) {
	   JedisWrapper jedis = new JedisWrapper();
	   jedis.WATCH(new String[]{ "name", "address" });
	   jedis.MULTI();
	   jedis.SET("name", "Alan");
	   jedis.SET("address", "Milton Keynes");
	   // Nested MULTI is not allowed
	   // jedis.MULTI();   
	   jedis.LPOP("fred");
	   // Adding watches after MULTI is not allowed
       // jedis.WATCH(new String[]{ "address" });
	   switch (jedis.EXEC().getEnum()) {
	   case Result.OK:
	      // Can't exec again:
	      // jedis.EXEC();
	      break;
	   case Result.FAIL:
	      // On fail I can do extra stuff (presumably pointlessly):
     	  jedis.SET("name", "Turing");
	      jedis.DISCARD();
	      break;
	   }
	}
}
